
sourceSets {
    String sharedTestDir = project(':xtraplatform-feature-transformer-api').file("src/test/java")
    test {
        java.srcDir sharedTestDir
    }
}

dependencies {
    provided project(':xtraplatform-geometries')
    provided project(':xtraplatform-codelists')
    provided project(':xtraplatform-cql')
    provided project(':xtraplatform-crs')
    provided project(':xtraplatform-features')
    provided project(':xtraplatform-feature-transformer-api')

    embedded (group: 'com.github.davidmoten', name: 'rxjava2-jdbc', version: '0.2.9') {
        exclude module: 'reactive-streams'
        exclude module: 'commons-io'
        exclude module: 'slf4j-api'
        exclude group: 'com.google.code.findbugs'
    }
    //embeddedFlat group: 'io.reactivex.rxjava3', name: 'rxjava', version: '3.1.3'
    embeddedFlat group: 'com.github.akarnokd', name: 'rxjava3-bridge', version: '3.0.2'
    embeddedFlat group: 'com.zaxxer', name: 'HikariCP', version: '5.0.1'

    embeddedFlat group: 'org.postgresql', name: 'postgresql', version: '42.3.3'

    embeddedExport group: 'org.xerial', name: 'sqlite-jdbc', version: '3.36.0.3'
    embedded group: 'de.interactive_instruments', name: 'xtraplatform-spatialite', version: '5.0.1-3'

    embedded group: 'us.fatehi', name: 'schemacrawler-api', version: '16.11.6'
    embedded group: 'us.fatehi', name: 'schemacrawler-tools', version: '16.11.6'
    embeddedFlat group: 'us.fatehi', name: 'schemacrawler-postgresql', version: '16.11.6'
    embeddedFlat group: 'us.fatehi', name: 'schemacrawler-sqlite', version: '16.11.6'

    embeddedFlat group: 'com.github.jsqlparser', name: 'jsqlparser', version: '3.2'

    testImplementation(testFixtures(project(":xtraplatform-cql")))
}

moduleInfo {
    requires = [
            'java.management',
            'java.naming',
            'java.sql',
            'java.security.sasl', //TODO: who needs this? removing it breaks the build
    ]
}
