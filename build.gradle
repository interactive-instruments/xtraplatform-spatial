buildscript {
    dependencies {
        classpath (group: 'de.interactive_instruments', name: 'xtraplatform-modules', version: '4.0.0-SNAPSHOT') {
            changing = true
        }
    }
    configurations.all {
        resolutionStrategy.cacheChangingModulesFor 0, 'seconds'
    }
}
plugins {
    id 'de.interactive_instruments.xtraplatform-feature' version '4.0.0-SNAPSHOT'
    id 'com.github.hierynomus.license-report' version '0.16.1' apply false
}

//apply plugin: 'de.interactive_instruments.xtraplatform-feature'

allprojects {
    group = 'de.interactive_instruments'
}

ext {
    versionSuffix = (project.hasProperty('branch') && project.getProperty('branch') != 'master' ? ('-' + project.getProperty('branch')) : '') + (project.findProperty('snapshot') == 'true' ? '-SNAPSHOT' : '')
}

version = '6.0.0' + versionSuffix

dependencies {
    feature group: 'de.interactive_instruments', name: 'xtraplatform-core', version: '5.0.0-jpms-SNAPSHOT'
    feature group: 'de.interactive_instruments', name: 'xtraplatform-native', version: '2.0.0-SNAPSHOT'

    bundle subprojects
}


subprojects {
    repositories {
        mavenCentral()
        maven {
            url "https://repo.osgeo.org/repository/release"
        }
        maven {
            url "https://maven.ecc.no/releases"
        }
    }

    //TODO: workaround for bug in version 2.1
    /*dependencies {
        testImplementation('com.athaydes:spock-reports') {
            version {
                strictly '2.0-groovy-3.0'
            }
        }
    }*/
}

apply from: 'immutables.gradle'

//apply from: 'unit-tests.gradle'

//apply from: 'integration-tests.gradle'

apply from: 'license-headers.gradle'

//apply from: 'license-report.gradle'

